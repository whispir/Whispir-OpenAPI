// This is the entrypoint for the package - contains custom now - demo for Mark and Carl.
export * from './api/apis';
export * from './model/models';

{{#apiInfo}}
{{#apis}}
{{#operations}}
import { {{ classname }} } from './api/{{ classFilename }}';
{{/operations}}
{{/apis}}

type Config = {
    username: string;
    password: string;
    apiKey: string;
    baseUrl: string;
};

export const WhispirClient = ({
    username,
    password,
    apiKey,
    baseUrl,
}: Config) => { 
    const defaultHeaders = { 
        'X-API-KEY': apiKey,
        Authorization: `Basic ${Buffer.from(`${username}:${password}`).toString("base64")}`,
    }
    {{#apis}}{{#operations}}
    const {{ classFilename }} = new {{ classname }}(baseUrl);
    {{ classFilename }}.defaultHeaders(defaultHeaders);{{/operations}}{{/apis}}

    return { 
        {{#apis}}{{#operations}}{{ classFilename }},
        {{/operations}}{{/apis}}
    }
}
{{/apiInfo}}



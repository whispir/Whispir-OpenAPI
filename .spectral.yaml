extends: './.spectral.base.yaml'
rules:
  required-response-headers:
    description: 'Responses must have the following "headers": "Content-Type", "Content-Length", "Access-Control-Allow-Origin", "Expires", "Cache-Control".'
    severity: error
    given: $..responses[*]
    then:
      field: headers
      function: schema
      functionOptions:
        dialect: draft7
        schema:
          type: object
          required: ["Content-Type", "Content-Length", "Access-Control-Allow-Origin", "Expires", "Cache-Control"]
overrides:
  - rules:
      schema-examples: off
      schema-descriptions: off
      schema-property-descriptions: off
      schema-property-examples: off
    files:
      - '**#/components/schemas/responseTemplatePattern' # Response Template Endpoint Schemas
      - '**#/components/schemas/responseRule'
      - '**#/components/schemas/contact' # Contact Endpoint Schemas
      - '**#/components/schemas/messagingoptions'
      - '**#/components/schemas/distributionlist' # Distribution List Endpoint Schemas
      - '**#/components/schemas/locations'
      - '**#/components/schemas/location'
      - '**#/components/schemas/scenario' # Scenario Endpoint Schemas
      - '**#/components/schemas/workspace' # Workspace Endpoint Schemas
      - '**#/components/schemas/user' # User Endpoint Schemas
      - '**#/components/schemas/event' # Event Endpoint Schemas
      - '**#/components/schemas/import' # Import Endpoint Schemas
      - '**#/components/schemas/fieldMapping'
      - '**#/components/schemas/auth' # Auth Endpoint Schemas
      - '**#/components/schemas/activity' # Activity Endpoint Schemas
      - '**#/components/requestBodies/event'
  - rules:
      payload-examples: off
    files:
      - '**#/paths/~1workspaces~1{workspaceId}~1resources' # Resources Endpoint Examples
      - '**#/paths/~1workspaces~1{workspaceId}~1contacts' # Contacts Endpoint Examples
      - '**#/paths/~1workspaces~1{workspaceId}~1distributionlists' # DistributionLists Endpoint Examples
      - '**#/paths/~1workspaces~1{workspaceId}~1events' # Events Endpoint Examples
      - '**#/components/requestBodies/event'
      - '**#/paths/~1workspaces~1{workspaceId}~1responserules' # responserules Endpoint Examples
      - '**#/paths/~1workspaces~1{workspaceId}~1scenario' # scenario Endpoint Examples
      - '**#/paths/~1workspaces' # workspace Endpoint Examples
      - '**#/paths/~1activities' # activity Endpoint Examples
      - '**#/paths/~1users' # user Endpoint Examples
      - '**#/paths/~1workspaces~1{workspaceId}~1import' # import Endpoint Examples
      - '**#/paths/~1auth' # Auth Endpoint Examples